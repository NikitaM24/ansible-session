---
- name: EC2 Test Example
  hosts: localhost
  connection: local
  gather_facts: False
  environment:
    AWS_ACCESS_KEY_ID: "AKIA6CXQOFMVMCIQCW7T"
    AWS_SECRET_ACCESS_KEY: "+aXBlUrYmr1jUjntOZmaI2nh5blqD0E3GfcmF40i"
    AWS_DEFAULT_REGION: "us-east-2"
  vars:
    st_type: present
  tasks:
  - name: create ec2 instance
    ec2:
      key_name: raviohio
      instance_type: t2.micro
      image: ami-024e6efaf93d85776
      wait: yes
      group: webserver
      count: 1
      vpc_subnet_id: subnet-09ff655fb2c442ab8
      assign_public_ip: yes
      state: "{{ st_type }}"
